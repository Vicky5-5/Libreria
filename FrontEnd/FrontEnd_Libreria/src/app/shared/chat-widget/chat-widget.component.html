<!-- BotÃ³n flotante -->
<div class="chat-button" (click)="toggleChat()">
  ðŸ’¬
  <span *ngIf="unreadCount > 0" class="badge">
    {{ unreadCount }}
  </span>
</div>

<!-- Ventana -->
<div class="chat-window" *ngIf="isOpen">

  <div class="chat-header">
    <span>Chat LibrerÃ­a</span>
    <button (click)="toggleChat()">âœ–</button>
  </div>

  <div class="chat-body">
    <div *ngFor="let msg of messages"
         class="message"
         [class.self]="msg.userId === currentUserId">

      <div class="bubble">
        <strong>{{msg.nombre}}</strong>
        <p>{{msg.mensaje}}</p>
        <small>{{msg.fecha | date:'shortTime'}}</small>
      </div>

    </div>
  </div>

  <div class="chat-footer">
    <input
      [(ngModel)]="newMessage"
      (keyup.enter)="send()"
      placeholder="Escribe un mensaje..." />
    <button (click)="send()">Enviar</button>
  </div>

</div>